<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>廈門漫遊 2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-marble: #f5efe6;
            --deep-coffee: #5d4037;
            --light-coffee: #d7ccc8;
            --card-bg: #ffffff;
            /* 強化貼紙漂浮感的陰影 */
            --sticker-shadow: 0 10px 0px rgba(93, 64, 55, 0.08), 0 15px 25px rgba(93, 64, 55, 0.12);
            --text-shadow: 2px 2px 0px rgba(255, 255, 255, 0.8), 4px 4px 0px rgba(93, 64, 55, 0.1);
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            font-family: 'Noto Sans TC', sans-serif !important;
            font-weight: 900 !important;
        }

        body {
            margin: 0; padding: 0;
            background-color: var(--bg-marble);
            color: var(--deep-coffee);
            height: 100vh; display: flex; flex-direction: column;
            overflow: hidden;
        }

        /* 1. 主題字體大一點 + 陰影 */
        .header {
            padding: 25px 20px 15px; display: flex; align-items: center; justify-content: center;
            position: relative; background: var(--bg-marble); z-index: 100;
        }
        .header h2 {
            font-size: 32px; /* 字體加大 */
            letter-spacing: 2px;
            text-shadow: var(--text-shadow); /* 加入立體陰影 */
            margin: 0;
        }

        .back-btn {
            position: absolute; left: 20px; width: 45px; height: 45px;
            background: white; border: 3px solid var(--deep-coffee);
            border-radius: 15px; display: flex; align-items: center; justify-content: center;
            box-shadow: 4px 4px 0px var(--deep-coffee); cursor: pointer;
        }

        .page { display: none; padding: 10px 20px; flex: 1; overflow-y: auto; padding-bottom: 150px; }
        .page.active { display: block; animation: slideUp 0.3s ease-out; }
        @keyframes slideUp { from { transform: translateY(15px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        /* 3. 首頁卡片半徑 24px + 貼紙陰影 */
        .dashboard { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-top: 15px; }
        .card {
            background: var(--card-bg); border: 3px solid var(--deep-coffee);
            border-radius: 24px; padding: 35px 15px; 
            box-shadow: var(--sticker-shadow); /* 貼紙浮起感 */
            text-align: center; display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: all 0.2s ease;
            position: relative;
            top: 0;
        }
        .card:active { 
            top: 6px; /* 壓下去的感覺 */
            box-shadow: 0 4px 0px rgba(93, 64, 55, 0.1);
        }
        .card-full { grid-column: span 2; background: var(--light-coffee); flex-direction: row; gap: 20px; }

        /* 2. & 5. 統一 Icon 風格 (大型圓潤) */
        .icon-svg { width: 60px; height: 60px; fill: var(--deep-coffee); }
        .nav-icon { width: 28px; height: 28px; fill: var(--deep-coffee); margin-bottom: 3px; }

        /* 4. 導覽列高度優化 */
        .nav-bar { 
            height: 75px; /* 高度調降 */
            background: white; border-top: 3.5px solid var(--deep-coffee); 
            display: flex; justify-content: space-around; align-items: center; 
            position: fixed; bottom: 0; width: 100%; z-index: 200; 
            padding-bottom: 8px; 
        }
        .nav-item { text-align: center; font-size: 12px; flex: 1; color: var(--deep-coffee); opacity: 0.6; }
        .nav-item.active { opacity: 1; }

        /* 列表樣式 */
        .date-slider { display: flex; gap: 10px; padding: 10px 0; overflow-x: auto; margin-bottom: 20px; }
        .date-tab { padding: 12px 25px; background: white; border: 3px solid var(--deep-coffee); border-radius: 20px; }
        .date-tab.active { background: var(--deep-coffee); color: white; box-shadow: 4px 4px 0px var(--light-coffee); }

        .timeline { border-left: 4px solid var(--light-coffee); margin-left: 15px; padding-left: 25px; }
        .timeline-item { position: relative; margin-bottom: 25px; background: white; padding: 18px; border-radius: 20px; border: 3px solid var(--deep-coffee); box-shadow: var(--sticker-shadow); }
        
        /* 計算機 UI */
        .calc-box { background: white; border: 3px solid var(--deep-coffee); border-radius: 28px; padding: 25px; margin-bottom: 15px; box-shadow: var(--sticker-shadow); }
        .item-input { width: 100%; border: none; border-bottom: 4px solid var(--light-coffee); font-size: 22px; padding: 10px 0; color: var(--deep-coffee); outline: none; margin-bottom: 15px; }
        .calc-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; }
        .calc-btn { background: white; border: 3px solid var(--deep-coffee); border-radius: 18px; padding: 15px 0; font-size: 22px; box-shadow: 3px 3px 0px var(--light-coffee); }
        .calc-btn:active { transform: translate(2px, 2px); box-shadow: none; }

        .bottom-action { position: fixed; bottom: 95px; width: 100%; display: flex; justify-content: center; z-index: 150; }
        .long-btn { width: 85%; padding: 20px; background: var(--deep-coffee); color: white; border: none; border-radius: 40px; font-size: 20px; box-shadow: 0 8px 15px rgba(0,0,0,0.2); }
    </style>
</head>
<body>

    <div class="header">
        <div id="back-btn" class="back-btn" onclick="showPage('home')" style="display:none;">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
        </div>
        <h2 id="page-title">廈門漫遊 2026</h2>
    </div>

    <div id="home" class="page active">
        <div class="dashboard">
            <div class="card card-full" onclick="showPage('schedule')">
                <svg class="icon-svg" viewBox="0 0 24 24"><path d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zM9 14H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm-8 4H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z"/></svg>
                <span>行程規劃表</span>
            </div>
            <div class="card" onclick="showPage('transport')">
                <svg class="icon-svg" viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 16H6v-2h12v2zm0-4H6v-2h12v2zm0-4H6V8h12v2z"/></svg>
                <span>交通資訊</span>
            </div>
            <div class="card" onclick="showPage('wallet')">
                <svg class="icon-svg" viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"/></svg>
                <span>匯率記帳</span>
            </div>
            <div class="card" onclick="showPage('gift')">
                <svg class="icon-svg" viewBox="0 0 24 24"><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-2 .89-2 2v12c0 1.1.89 2 2 2h16c1.1 0 2-.89 2-2V8c0-1.1-.89-2-2-2z"/></svg>
                <span>伴手禮</span>
            </div>
            <div class="card" onclick="showPage('luggage')">
                <svg class="icon-svg" viewBox="0 0 24 24"><path d="M17 6h-2V3c0-.55-.45-1-1-1h-4c-.55 0-1 .45-1 1v3H7c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2z"/></svg>
                <span>行李清單</span>
            </div>
            <div class="card card-full" onclick="window.open('https://www.google.com/maps')">
                <svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>
                <span>Google Map</span>
            </div>
        </div>
    </div>

    <div id="schedule" class="page">
        <div class="date-slider">
            <div class="date-tab active" onclick="setDay('2/27')">2/27 (五)</div>
            <div class="date-tab" onclick="setDay('2/28')">2/28 (六)</div>
            <div class="date-tab" onclick="setDay('3/01')">3/01 (日)</div>
        </div>
        <div class="timeline" id="timeline-box"></div>
    </div>
    <div id="transport" class="page"><div id="transport-box"></div></div>
    <div id="wallet" class="page">
        <div class="calc-box">
            <input type="text" id="calc-name" class="item-input" placeholder="輸入品項名稱...">
            <div style="text-align: right;">
                <div id="calc-val" style="font-size: 45px; margin: 0;">0</div>
                <span style="color: var(--deep-coffee); font-size: 18px;">≈ NT$ <span id="calc-nt">0</span></span>
            </div>
            <div class="calc-grid" style="margin-top: 20px;">
                <div class="calc-btn" onclick="press('7')">7</div><div class="calc-btn" onclick="press('8')">8</div><div class="calc-btn" onclick="press('9')">9</div><div class="calc-btn" style="background:var(--light-coffee)" onclick="press('C')">C</div>
                <div class="calc-btn" onclick="press('4')">4</div><div class="calc-btn" onclick="press('5')">5</div><div class="calc-btn" onclick="press('6')">6</div><div class="calc-btn" style="background:var(--light-coffee); grid-row: span 3; display:flex; align-items:center; justify-content:center;" onclick="saveExp()">記帳</div>
                <div class="calc-btn" onclick="press('1')">1</div><div class="calc-btn" onclick="press('2')">2</div><div class="calc-btn" onclick="press('3')">3</div>
                <div class="calc-btn" style="grid-column: span 2;" onclick="press('0')">0</div><div class="calc-btn" onclick="press('.')">.</div>
            </div>
        </div>
        <div id="wallet-box"></div>
    </div>
    <div id="gift" class="page"><div id="gift-box"></div></div>
    <div id="luggage" class="page"><div id="luggage-box"></div></div>

    <div class="bottom-action" id="action-area" style="display:none;">
        <button class="long-btn" onclick="doAdd()">+ 新增紀錄</button>
    </div>

    <nav class="nav-bar">
        <div class="nav-item active" id="n-home" onclick="showPage('home')"><svg class="nav-icon" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>首頁</div>
        <div class="nav-item" id="n-schedule" onclick="showPage('schedule')"><svg class="nav-icon" viewBox="0 0 24 24"><path d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10z"/></svg>行程</div>
        <div class="nav-item" id="n-wallet" onclick="showPage('wallet')"><svg class="nav-icon" viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"/></svg>記帳</div>
        <div class="nav-item" id="n-gift" onclick="showPage('gift')"><svg class="nav-icon" viewBox="0 0 24 24"><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-2 .89-2 2v12c0 1.1.89 2 2 2h16c1.1 0 2-.89 2-2V8c0-1.1-.89-2-2-2z"/></svg>伴手禮</div>
        <div class="nav-item" id="n-luggage" onclick="showPage('luggage')"><svg class="nav-icon" viewBox="0 0 24 24"><path d="M17 6h-2V3c0-.55-.45-1-1-1h-4c-.55 0-1 .45-1 1v3H7c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2z"/></svg>行李</div>
    </nav>

    <script>
        let curPage = 'home';
        let curDay = '2/27';
        let calcStr = "";
        const rate = 4.5;

        const titles = { home: "廈門漫遊 2026", schedule: "行程表", transport: "交通資訊", wallet: "匯率記帳", gift: "伴手禮", luggage: "行李清單" };

        function showPage(id) {
            curPage = id;
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            document.getElementById('n-'+id)?.classList.add('active');

            document.getElementById('back-btn').style.display = id === 'home' ? 'none' : 'flex';
            document.getElementById('action-area').style.display = (id === 'home' || id === 'wallet') ? 'none' : 'flex';
            document.getElementById('page-title').innerText = titles[id];
            render();
        }

        function setDay(d) {
            curDay = d;
            document.querySelectorAll('.date-tab').forEach(t => t.classList.toggle('active', t.innerText.includes(d)));
            render();
        }

        function press(k) {
            if (k === 'C') calcStr = "";
            else calcStr += k;
            document.getElementById('calc-val').innerText = calcStr || "0";
            document.getElementById('calc-nt').innerText = calcStr ? Math.round(parseFloat(calcStr) * rate) : "0";
        }

        function saveExp() {
            const name = document.getElementById('calc-name').value;
            const amt = parseFloat(calcStr);
            if (!name || isNaN(amt)) return alert("請填寫品項名稱與金額！");
            let data = JSON.parse(localStorage.getItem('x_exp')) || [];
            data.unshift({ name, cny: amt, nt: Math.round(amt * rate) });
            localStorage.setItem('x_exp', JSON.stringify(data));
            document.getElementById('calc-name').value = "";
            press('C'); render();
        }

        function doAdd() {
            let data = JSON.parse(localStorage.getItem('x_'+curPage + (curPage==='schedule'?curDay:''))) || [];
            if (curPage === 'schedule') {
                const time = prompt("輸入時間 (如 10:30):");
                const loc = prompt("輸入地點:");
                if (time && loc) data.push({ time, loc });
            } else if (curPage === 'transport') {
                const mode = prompt("交通方式 (如 飛機/船):");
                const time = prompt("出發時間:");
                if (mode && time) data.push({ mode, time });
            } else {
                const text = prompt("新增內容:");
                if (text) data.push({ text, done: false });
            }
            localStorage.setItem('x_'+curPage + (curPage==='schedule'?curDay:''), JSON.stringify(data));
            render();
        }

        function toggle(i) {
            let data = JSON.parse(localStorage.getItem('x_'+curPage));
            data[i].done = !data[i].done;
            localStorage.setItem('x_'+curPage, JSON.stringify(data));
            render();
        }

        function del(key, i) {
            let data = JSON.parse(localStorage.getItem(key));
            data.splice(i, 1);
            localStorage.setItem(key, JSON.stringify(data));
            render();
        }

        function render() {
            if (curPage === 'schedule') {
                const data = JSON.parse(localStorage.getItem('x_schedule'+curDay)) || [];
                document.getElementById('timeline-box').innerHTML = data.map((it, i) => `
                    <div class="timeline-item">
                        <div style="font-size: 14px; opacity:0.6;">${it.time}</div>
                        <div style="font-size: 19px;">${it.loc}</div>
                        <div style="position:absolute; right:15px; top:20px; color:#ccc;" onclick="del('x_schedule${curDay}', ${i})">✕</div>
                    </div>`).join('');
            } else if (curPage === 'transport') {
                const data = JSON.parse(localStorage.getItem('x_transport')) || [];
                document.getElementById('transport-box').innerHTML = data.map((it, i) => `
                    <div class="timeline-item">
                        <div style="font-size: 20px;">${it.mode} <span style="font-size:14px; opacity:0.5;">${it.time}</span></div>
                        <div style="position:absolute; right:15px; top:20px; color:#ccc;" onclick="del('x_transport', ${i})">✕</div>
                    </div>`).join('');
            } else if (curPage === 'wallet') {
                const data = JSON.parse(localStorage.getItem('x_exp')) || [];
                document.getElementById('wallet-box').innerHTML = data.map((it, i) => `
                    <div class="timeline-item">
                        <div><b>${it.name}</b><br><small>¥${it.cny} → NT$${it.nt}</small></div>
                        <div style="position:absolute; right:15px; top:20px; color:#ccc;" onclick="del('x_exp', ${i})">✕</div>
                    </div>`).join('');
            } else if (curPage === 'gift' || curPage === 'luggage') {
                const data = JSON.parse(localStorage.getItem('x_'+curPage)) || [];
                document.getElementById(curPage+'-box').innerHTML = data.map((it, i) => `
                    <div class="timeline-item" onclick="toggle(${i})">
                        <input type="checkbox" ${it.done?'checked':''} style="width:20px; height:20px; margin-right:12px;">
                        <span style="${it.done?'text-decoration:line-through; opacity:0.4':''}">${it.text}</span>
                        <div style="position:absolute; right:15px; top:20px; color:#ccc;" onclick="event.stopPropagation(); del('x_${curPage}', ${i})">✕</div>
                    </div>`).join('');
            }
        }
        window.onload = () => showPage('home');
    </script>
</body>
</html>

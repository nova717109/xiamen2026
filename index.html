<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>廈門漫遊 2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-marble: #f5efe6;
            --deep-coffee: #5d4037;
            --light-coffee: #d7ccc8;
            --card-bg: #ffffff;
            --shadow: 0 6px 12px rgba(93, 64, 55, 0.15);
        }

        /* 全域樣式：強制粗體無襯線 */
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            font-family: 'Noto Sans TC', sans-serif !important;
            font-weight: 900 !important;
        }

        body {
            margin: 0; padding: 0;
            background-color: var(--bg-marble);
            background-image: radial-gradient(circle at 20% 30%, rgba(255,255,255,0.4) 0%, transparent 100%);
            color: var(--deep-coffee);
            height: 100vh; display: flex; flex-direction: column;
        }

        /* 頁面切換控制 */
        .page { display: none; padding: 20px; flex: 1; overflow-y: auto; padding-bottom: 160px; }
        .page.active { display: block; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* --- 首頁六宮格 --- */
        .dashboard { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 10px; }
        .card {
            background: var(--card-bg); border: 2px solid var(--deep-coffee);
            border-radius: 20px; padding: 25px 10px; box-shadow: var(--shadow);
            text-align: center; display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .card:active { transform: translateY(4px); box-shadow: none; }
        .card-full { grid-column: span 2; background: var(--light-coffee); flex-direction: row; gap: 15px; }

        /* --- 簡約日系 SVG 圖示 --- */
        .icon-svg { width: 45px; height: 45px; fill: var(--deep-coffee); margin-bottom: 8px; }
        .card-full .icon-svg { margin-bottom: 0; }

        /* --- 時間軸設計 --- */
        .date-slider {
            display: flex; overflow-x: auto; gap: 10px; padding: 10px 0;
            scrollbar-width: none; border-bottom: 1px solid var(--light-coffee); margin-bottom: 20px;
        }
        .date-tab {
            padding: 10px 20px; background: white; border: 2px solid var(--deep-coffee);
            border-radius: 50px; white-space: nowrap; font-size: 14px;
        }
        .date-tab.active { background: var(--deep-coffee); color: white; }

        .timeline { border-left: 3px solid var(--light-coffee); margin-left: 20px; padding-left: 25px; }
        .timeline-item { position: relative; margin-bottom: 25px; background: white; padding: 15px; border-radius: 15px; border: 2px solid var(--deep-coffee); box-shadow: var(--shadow); }
        .timeline-item::before { content: ""; position: absolute; left: -34px; top: 15px; width: 15px; height: 15px; background: var(--deep-coffee); border-radius: 50%; }

        /* --- 大按鈕計算機 --- */
        .calc-display { background: white; border: 2px solid var(--deep-coffee); border-radius: 20px; padding: 20px; margin-bottom: 15px; text-align: right; box-shadow: var(--shadow); }
        .calc-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }
        .calc-btn { background: white; border: 2px solid var(--deep-coffee); border-radius: 15px; padding: 20px 0; font-size: 20px; box-shadow: var(--shadow); text-align: center; }
        .calc-btn:active { transform: translateY(2px); box-shadow: none; }
        .calc-btn.action { background: var(--light-coffee); }

        /* --- 全域懸浮計算機按鈕 --- */
        .fab-calc {
            position: fixed; right: 20px; bottom: 170px; width: 60px; height: 60px;
            background: var(--deep-coffee); border-radius: 50%; display: flex;
            align-items: center; justify-content: center; box-shadow: 0 8px 16px rgba(0,0,0,0.2); z-index: 999;
        }
        .fab-calc svg { fill: white; width: 30px; height: 30px; }

        /* --- 底部導覽列 --- */
        .nav-bar {
            height: 80px; background: white; border-top: 2px solid var(--deep-coffee);
            display: flex; justify-content: space-around; align-items: center;
            position: fixed; bottom: 0; width: 100%; z-index: 100;
        }
        .nav-item { text-align: center; font-size: 12px; }
        .nav-icon { width: 28px; height: 28px; fill: var(--deep-coffee); margin-bottom: 2px; }

        /* --- 置中長條按鈕 --- */
        .bottom-add-container { position: fixed; bottom: 95px; width: 100%; display: flex; justify-content: center; z-index: 90; }
        .long-btn { width: 85%; padding: 15px; background: var(--deep-coffee); color: white; border: none; border-radius: 40px; font-size: 16px; box-shadow: var(--shadow); }

        /* --- 清單與勾選 --- */
        .check-item { display: flex; align-items: center; background: white; padding: 15px; border-radius: 15px; border: 2px solid var(--deep-coffee); margin-bottom: 10px; box-shadow: var(--shadow); }
        .check-item input { width: 22px; height: 22px; margin-right: 15px; accent-color: var(--deep-coffee); }
        .delete-x { margin-left: auto; color: #888; font-size: 20px; padding: 5px; }
    </style>
</head>
<body>

    <div class="fab-calc" onclick="showPage('wallet')">
        <svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 15H7v-2h4v2zm0-4H7v-2h4v2zm0-4H7V8h4v2zm6 8h-4v-2h4v2zm0-4h-4v-2h4v2zm0-4h-4V8h4v2z"/></svg>
    </div>

    <div id="home" class="page active">
        <h1 style="text-align:center; letter-spacing: 2px;">廈門漫遊 2026</h1>
        <div class="dashboard">
            <div class="card card-full" onclick="showPage('schedule')">
                <svg class="icon-svg" viewBox="0 0 24 24"><path d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10z"/></svg>
                <span>行程規劃表</span>
            </div>
            <div class="card" onclick="showPage('transport')">
                <svg class="icon-svg" viewBox="0 0 24 24"><path d="M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z"/></svg>
                <span>交通資訊</span>
            </div>
            <div class="card" onclick="showPage('wallet')">
                <svg class="icon-svg" viewBox="0 0 24 24"><path d="M21 18v1c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2V5c0-1.1.89-2 2-2h14c1.1 0 2 .9 2 2v1h-9c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2h9zm-9-2h10V8H12v8z"/></svg>
                <span>記帳本</span>
            </div>
            <div class="card" onclick="showPage('gift')">
                <svg class="icon-svg" viewBox="0 0 24 24"><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-2 .89-2 2v12c0 1.1.89 2 2 2h16c1.1 0 2-.89 2-2V8c0-1.1-.89-2-2-2z"/></svg>
                <span>伴手禮</span>
            </div>
            <div class="card" onclick="showPage('luggage')">
                <svg class="icon-svg" viewBox="0 0 24 24"><path d="M17 6h-2V3c0-.55-.45-1-1-1h-4c-.55 0-1 .45-1 1v3H7c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2z"/></svg>
                <span>行李清單</span>
            </div>
            <div class="card card-full" onclick="window.open('https://www.google.com/maps')">
                <svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>
                <span>Google Map 導航</span>
            </div>
        </div>
    </div>

    <div id="schedule" class="page">
        <h2>廈門時間軸</h2>
        <div class="date-slider">
            <div class="date-tab active" onclick="switchDate('2/27')">2/27 (五)</div>
            <div class="date-tab" onclick="switchDate('2/28')">2/28 (六)</div>
            <div class="date-tab" onclick="switchDate('3/01')">3/01 (日)</div>
        </div>
        <div class="timeline" id="timeline-list"></div>
    </div>

    <div id="wallet" class="page">
        <h2>記帳計算機</h2>
        <div class="calc-display">
            <div style="font-size: 14px; color: #888;">人民幣 CNY</div>
            <div id="calc-input" style="font-size: 28px;">0</div>
            <div style="font-size: 14px; color: var(--deep-coffee); margin-top: 5px;">台幣約 NT$ <span id="calc-twd">0</span></div>
        </div>
        <div class="calc-grid">
            <div class="calc-btn" onclick="calcNum('7')">7</div><div class="calc-btn" onclick="calcNum('8')">8</div><div class="calc-btn" onclick="calcNum('9')">9</div><div class="calc-btn action" onclick="calcClear()">C</div>
            <div class="calc-btn" onclick="calcNum('4')">4</div><div class="calc-btn" onclick="calcNum('5')">5</div><div class="calc-btn" onclick="calcNum('6')">6</div><div class="calc-btn action" onclick="saveExpense()">記帳</div>
            <div class="calc-btn" onclick="calcNum('1')">1</div><div class="calc-btn" onclick="calcNum('2')">2</div><div class="calc-btn" onclick="calcNum('3')">3</div><div class="calc-btn" onclick="calcNum('.')">.</div>
            <div class="calc-btn" style="grid-column: span 4;" onclick="calcNum('0')">0</div>
        </div>
        <div id="expense-history" style="margin-top: 20px;"></div>
    </div>

    <div id="generic-list" class="page">
        <h2 id="list-title">內容</h2>
        <div id="items-container"></div>
    </div>

    <div class="bottom-add-container" id="add-btn-wrapper" style="display:none;">
        <button class="long-btn" onclick="handleAdd()">+ 新增紀錄</button>
    </div>

    <nav class="nav-bar">
        <div class="nav-item" onclick="showPage('home')">
            <svg class="nav-icon" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>首頁
        </div>
        <div class="nav-item" onclick="showPage('schedule')">
            <svg class="nav-icon" viewBox="0 0 24 24"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm3.3 13.3L11 13V7h1.5v5.25L17 14.92l-.71.71z"/></svg>行程
        </div>
        <div class="nav-item" onclick="showPage('wallet')">
            <svg class="nav-icon" viewBox="0 0 24 24"><path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/></svg>記帳
        </div>
        <div class="nav-item" onclick="showPage('gift')">
            <svg class="nav-icon" viewBox="0 0 24 24"><path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"/></svg>清單
        </div>
    </nav>

    <script>
        let currentPage = 'home';
        let currentDay = '2/27';
        let calcVal = "";
        const rate = 4.5;

        function showPage(p) {
            currentPage = p;
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.getElementById('add-btn-wrapper').style.display = (p === 'home') ? 'none' : 'flex';

            if(['transport', 'gift', 'luggage'].includes(p)) {
                document.getElementById('list-title').innerText = p === 'transport' ? '交通資訊' : (p === 'gift' ? '伴手禮清單' : '行李清單');
                document.getElementById('generic-list').classList.add('active');
                renderGenericList();
            } else {
                document.getElementById(p).classList.add('active');
                if(p === 'schedule') renderTimeline();
                if(p === 'wallet') renderHistory();
            }
        }

        // --- 行程功能 ---
        function switchDate(d) {
            currentDay = d;
            document.querySelectorAll('.date-tab').forEach(t => t.classList.toggle('active', t.innerText.includes(d)));
            renderTimeline();
        }

        function renderTimeline() {
            const data = JSON.parse(localStorage.getItem('x_sched_'+currentDay)) || [];
            document.getElementById('timeline-list').innerHTML = data.map((item, i) => `
                <div class="timeline-item">
                    ${item} <span class="delete-x" onclick="deleteItem('x_sched_${currentDay}', ${i}, 'timeline')">✕</span>
                </div>
            `).join('');
        }

        // --- 計算機功能 ---
        function calcNum(n) { calcVal += n; updateCalc(); }
        function calcClear() { calcVal = ""; updateCalc(); }
        function updateCalc() {
            document.getElementById('calc-input').innerText = calcVal || "0";
            document.getElementById('calc-twd').innerText = calcVal ? Math.round(calcVal * rate) : "0";
        }
        function saveExpense() {
            if(!calcVal) return;
            const history = JSON.parse(localStorage.getItem('x_wallet')) || [];
            history.unshift({ cny: calcVal, twd: Math.round(calcVal * rate), time: new Date().toLocaleTimeString() });
            localStorage.setItem('x_wallet', JSON.stringify(history));
            calcClear(); renderHistory();
        }
        function renderHistory() {
            const history = JSON.parse(localStorage.getItem('x_wallet')) || [];
            document.getElementById('expense-history').innerHTML = history.map((h, i) => `
                <div class="check-item">¥${h.cny} → NT$${h.twd} <span class="delete-x" onclick="deleteItem('x_wallet', ${i}, 'history')">✕</span></div>
            `).join('');
        }

        // --- 通用清單功能 ---
        function renderGenericList() {
            const data = JSON.parse(localStorage.getItem('x_'+currentPage)) || [];
            document.getElementById('items-container').innerHTML = data.map((item, i) => `
                <div class="check-item">
                    <input type="checkbox" ${item.done ? 'checked' : ''} onclick="toggleCheck(${i})">
                    <span style="${item.done ? 'text-decoration:line-through; opacity:0.5' : ''}">${item.text}</span>
                    <span class="delete-x" onclick="deleteItem('x_${currentPage}', ${i}, 'generic')">✕</span>
                </div>
            `).join('');
        }

        function toggleCheck(i) {
            let data = JSON.parse(localStorage.getItem('x_'+currentPage));
            data[i].done = !data[i].done;
            localStorage.setItem('x_'+currentPage, JSON.stringify(data));
            renderGenericList();
        }

        // --- 統一新增處理 ---
        function handleAdd() {
            const input = prompt("請輸入新增內容：");
            if(!input) return;
            const key = (currentPage === 'schedule') ? 'x_sched_'+currentDay : 'x_'+currentPage;
            let data = JSON.parse(localStorage.getItem(key)) || [];
            if(['gift', 'luggage', 'transport'].includes(currentPage)) {
                data.push({ text: input, done: false });
            } else {
                data.push(input);
            }
            localStorage.setItem(key, JSON.stringify(data));
            showPage(currentPage);
        }

        function deleteItem(key, i, type) {
            let data = JSON.parse(localStorage.getItem(key));
            data.splice(i, 1);
            localStorage.setItem(key, JSON.stringify(data));
            showPage(currentPage);
        }

        window.onload = () => showPage('home');
    </script>
</body>
</html>
